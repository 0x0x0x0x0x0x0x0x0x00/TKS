_G.UpperTorsoToggle = _G.UpperTorsoToggle or true
imagem.Visible = _G.UpperTorsoToggle

local originalSize = Vector3.new(1.5772831439971924, 1.484114408493042, 1.0019999742507935)
local changedSize = Vector3.new(5, 5, 5)

local function aplicarUpperTorso(player)
	if player == LocalPlayer then return end

	local char = Workspace:FindFirstChild(player.Name)
	if not char then return end

	local upperTorso = char:FindFirstChild("UpperTorso")
	if not upperTorso or not upperTorso:IsA("BasePart") then return end

	pcall(function()
		if _G.UpperTorsoToggle then
			upperTorso.Size = changedSize
			upperTorso.Transparency = 0.8
		else
			upperTorso.Size = originalSize
			upperTorso.Transparency = 0
		end
	end)
end

local function verificarJogadores()
	for _, player in ipairs(Players:GetPlayers()) do
		aplicarUpperTorso(player)
	end
end

-- Ativação automática em jogadores que entram / que trocam de personagem
Players.PlayerAdded:Connect(function(player)
	player.CharacterAdded:Connect(function()
		task.wait(0.5)
		aplicarUpperTorso(player)
	end)
end)

for _, player in ipairs(Players:GetPlayers()) do
	player.CharacterAdded:Connect(function()
		task.wait(0.5)
		aplicarUpperTorso(player)
	end)
end

-- Loop para manter efeito ativo (corrigido para sempre atualizar)
task.spawn(function()
	while true do
		verificarJogadores()
		task.wait(1)
	end
end)
